<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Bootstrap -->
		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
		<script src="bootstrap/jquery.min.js"></script>
		<script src="bootstrap/popper.min.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>

		<!-- Plantilla -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="css/plantilla.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>


	<title>Bienvenido</title>

	<div class="col-md-6 col-center">
		<div class="form-group">
			<form id="registro-form">
				<p><H2>Registrar nueva tarea</H2></p><hr/><br>
				<p><label>Titulo</label> <input class="form-control" type="text" name="titulo" maxlength="65" placeholder="A침adir un titulo" required></p>
				<p><label>Descripci칩n</label> <textarea class="form-control" name="descripcion" rows="10" cols="75" placeholder="Ingresar una descripci칩n" required ></textarea></p>
				<p><label>Tarea asignada a:</label> <input class="form-control" type="text" name="asignado" maxlength="65" placeholder="Ingrese persona asignada para la tarea" required></p>
				<p><input type="submit" value="A침adir Tarea" name="registrar" class="btn btn-dark btn-block"/></p>
			</form>
		</div>
	</div>
</head>
<body>




<script>
    let token = localStorage.getItem('token')
	parsedToken = parseJwt(token);
	token = "Bearer " + token;
	parsedToken = parsedToken.authorities[0]


	if ( parsedToken == "admin") {


	}

	obtenerTareas()






	function obtenerTareas(){
		$.ajax({

			url: 'http://localhost:8080/obtener_tareas',
			type: "GET",
			contentType: 'application/json',
			headers: {
				'Authorization': token
			},
			success: function(data) {
				console.log("fasfasdasfsadasd")
				console.log(data)

			},
			error: function () {
				alert("Error")
			}
		});
	}


	function parseJwt(token) {
		var base64Url = token.split('.')[1];
		var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
		var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
			return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
		}).join(''));

		return JSON.parse(jsonPayload);
	};
</script>
</body>
</html>